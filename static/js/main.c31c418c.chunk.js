(this["webpackJsonpawetosis-topic-widget"]=this["webpackJsonpawetosis-topic-widget"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/orc_face.4899ed6e.png"},42:function(e,t,a){e.exports=a(54)},47:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a.n(o),c=a(35),i=a.n(c),l=(a(47),a(31)),u=a(4),s=a(36),d={breakpoints:["40em","52em","64em"],colors:{highlight:"hsla(205, 100%, 40%, 0.125)",eerieBlack:"#1d1e1e",registrationBlack:"#000",pastelGray:"#cecece",shadow:"#867962",oliveDrab:"#6b8311",lightText:"#cecece",darkText:"#1d1e1e"},fonts:{body:"system-ui, sans-serif",heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.25},space:[0,4,8,16,32,64,128,256,512],sizes:{avatar:48},radii:{default:4,circle:99999},shadows:{card:"0 0 4px rgba(0, 0, 0, .125)"},text:{heading:{fontFamily:"heading",lineHeight:"heading",fontWeight:"heading"},display:{fontFamily:"heading",fontWeight:"heading",lineHeight:"heading",fontSize:[5,6,7]},caps:{textTransform:"uppercase",letterSpacing:"0.1em"}},variants:{avatar:{width:"avatar",height:"avatar",borderRadius:"circle"},card:{p:2,bg:"background",boxShadow:"card"},link:{color:"primary"},nav:{fontSize:1,fontWeight:"bold",display:"inline-block",p:2,color:"inherit",textDecoration:"none",":hover,:focus,.active":{color:"primary"}}},buttons:{primary:{variant:"text.caps",fontSize:2,fontWeight:"bold",color:"background",bg:"primary",borderRadius:"default"},outline:{variant:"buttons.primary",color:"primary",bg:"transparent",boxShadow:"inset 0 0 2px"},secondary:{variant:"buttons.primary",color:"background",bg:"secondary"},destructive:{variant:"buttons.primary",color:"background",bg:"destructive",fontWeight:"normal"}},styles:{root:{fontFamily:"body",fontWeight:"body",lineHeight:"body"}}},m=function(e){var t=e.children;return r.a.createElement(s.a,{theme:d},t)},p=a(3),b=a(1),f=a(22),h=a.n(f),g=function(){return r.a.createElement(b.d,{px:2,bg:"eerieBlack",alignItems:"center"},r.a.createElement(b.e,{color:"lightText",mx:"auto",p:2,sx:{backgroundImage:"url(".concat(h.a,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center right",backgroundSize:"contain"},width:[1,3/4]},"Awetosis Topics Builder"))},w=a(15),E=a(40),v=a(39),x=a.n(v);!function(e){e.SECONDS="SECONDS",e.MINUTES="MINUTES",e.HOURS="HOURS"}(n||(n={}));var y=function(e){return 0===e.length?e:"".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1).toLowerCase())},k=function(e,t,a){var n=Object(o.useState)(e),r=Object(p.a)(n,2),c=r[0],i=r[1];return{value:c,toggleValue:Object(o.useCallback)((function(){i(t),setTimeout((function(){i(e)}),a)}),[e,a,t])}},O=function(e){var t={};return e.forEach((function(e,a){t["topic-".concat(a+1,"-text")]=e.text,t["topic-".concat(a+1,"-amount")]=e.amount,t["topic-".concat(a+1,"-unit")]=y(e.unit)})),t},S=function(e){var t,a=e.displayUrl,c=e.setTopics,i=e.topics,l=Object(E.a)({defaultValues:O(i)}),u=l.handleSubmit,s=l.register,d=Object(o.useState)(i.length),m=Object(p.a)(d,2),f=m[0],h=m[1],g=x()(),v=Object(p.a)(g,2)[1],S=k("Copy","Copied!",3e3),j=S.toggleValue,C=S.value,T=u((function(e){for(var t=[],a=1;a<=f;a+=1)t.push({text:e["topic-".concat(a,"-text")],amount:e["topic-".concat(a,"-amount")],unit:e["topic-".concat(a,"-unit")].toUpperCase()});c(t)})),U=Object(o.useCallback)((function(){h((function(e){return e+1}))}),[]),N=Object(o.useCallback)((function(){a&&(v(a),j())}),[j,a,v]);return r.a.createElement(b.a,{as:"form",onSubmit:T,px:2},(t=f,Array.from({length:t},(function(e,t){return t+1}))).map((function(e){var t="topic-".concat(e),a="".concat(t,"-text"),o="".concat(t,"-amount"),c="".concat(t,"-unit");return r.a.createElement(b.c,{key:t,my:2,bg:"white"},r.a.createElement(b.d,{flexWrap:"wrap",px:2,py:2},r.a.createElement(b.a,{width:[1,.5],pr:[0,2]},r.a.createElement(w.b,{htmlFor:a},"Name"),r.a.createElement(w.a,{id:a,name:a,placeholder:"Topic Text Goes Here","data-idx":e,type:"text",ref:s})),r.a.createElement(b.a,{width:[1,1/4],px:[0,2],py:[2,0]},r.a.createElement(w.b,{htmlFor:o},"Amount"),r.a.createElement(w.a,{id:o,name:o,defaultValue:"0",type:"number","data-idx":e,ref:s})),r.a.createElement(b.a,{width:[1,1/4],px:[0,2],py:[2,0]},r.a.createElement(w.b,{htmlFor:c},"Unit"),r.a.createElement(w.c,{id:c,name:c,defaultValue:y(n.MINUTES),"data-idx":e,ref:s},Object.keys(n).map((function(e){return r.a.createElement("option",{key:e.toLowerCase()},y(e))}))))))})),r.a.createElement(b.d,{flexWrap:"wrap",py:2},f>0&&r.a.createElement(b.f,{color:"darkText",pb:2,width:1},"Leave the name field blank to have the builder ignore a topic.",r.a.createElement("br",null),"You need at least one topic available in order to generate the topic view."),r.a.createElement(b.a,{width:[1,"auto"]},r.a.createElement(b.b,{onClick:U,type:"button",width:[1,"auto"]},"Add Topic")),f>0&&r.a.createElement(b.a,{pl:[0,2],py:[2,0],width:[1,"auto"]},r.a.createElement(b.b,{onClick:T,width:[1,"auto"]},"Submit"))),f>0&&a&&r.a.createElement(b.a,{width:[1,.5]},r.a.createElement(b.a,{width:[1,"auto"]},r.a.createElement(w.b,{htmlFor:"awetosis-topic-display-url"},"Display URL"),r.a.createElement(w.a,{backgroundColor:"white",disabled:!0,id:"awetosis-topic-display-url",value:a})),r.a.createElement(b.b,{onClick:N,mt:2,width:[1,"auto"]},C),r.a.createElement(b.f,{color:"darkText",pt:2,pb:2,width:1},"Paste the URL into a source in StreamLabs OBS.")))},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SECONDS,a=(null===e||void 0===e?void 0:e.toUpperCase())||"";return n[a]||t},C=function(e){return e.map((function(e){return{text:e.text,amount:"".concat(e.amount),unit:e.unit}}))},T=function(e){try{var t=atob(null!==e&&void 0!==e?e:""),a=JSON.parse(null!==t&&void 0!==t?t:"[]");return Array.isArray(a)?a.filter((function(e){return e.text&&e.amount})).map((function(e){return{text:e.text,amount:Number(e.amount),unit:j(e.unit)}})):[]}catch(n){return[]}},U=function(){return new URLSearchParams(Object(u.g)().search)},N=function(){var e=U(),t=Object(o.useState)(T(e.get("topics")).filter((function(e){return e.amount>0&&""!==e.text}))),a=Object(p.a)(t,2),n=a[0],c=a[1],i=Object(o.useState)(null),l=Object(p.a)(i,2),u=l[0],s=l[1],d=Object(o.useCallback)((function(e){c(function(e){return e.map((function(e){return{text:e.text,amount:Number(e.amount),unit:e.unit}}))}(e).filter((function(e){return e.text&&e.amount})))}),[]);return Object(o.useEffect)((function(){if(n.length>0){var e=window.location.hostname;""!==window.location.port&&(e="".concat(window.location.hostname,":").concat(window.location.port)),s("".concat(window.location.protocol,"//").concat(e).concat(window.location.pathname,"/display?topics=").concat(btoa(JSON.stringify(n))))}else s(null)}),[n]),r.a.createElement(b.a,{bg:"pastelGray",height:"100vh",width:"100vw"},r.a.createElement(g,null),r.a.createElement(b.a,{mx:"auto",width:[1,3/4]},r.a.createElement(S,{displayUrl:u,topics:C(n),setTopics:d})))},R=a(23),I=a(41),W=Object(o.forwardRef)((function(e,t){var a=e.first,n=e.topic,o=Object(I.a)(e,["first","topic"]);return r.a.createElement(b.c,Object.assign({bg:a?"oliveDrab":"shadow",px:2,py:2,ref:t,width:1},o),r.a.createElement(b.e,{color:"lightText"},n.text))})),B=function(e){var t=e.currentTopic,a=e.markCurrentTopicAsCompleted,c=Object(o.useState)(-1),i=Object(p.a)(c,2),l=i[0],u=i[1];return Object(o.useEffect)((function(){var e=setInterval((function(){u((function(e){return e<0?e:0===e?(a(),e):e-1}))}),1e3);return function(){return clearInterval(e)}}),[a]),Object(o.useEffect)((function(){var e=function(e,t){if(!e||!t)return 0;switch(t){case n.SECONDS:return e;case n.MINUTES:return 60*e;case n.HOURS:return 3600*e}}(null===t||void 0===t?void 0:t.amount,null===t||void 0===t?void 0:t.unit);u(e)}),[t]),l<0||null===t?r.a.createElement(b.a,{bg:"eerieBlack",px:2,py:2,sx:{backgroundImage:"url(".concat(h.a,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center right",backgroundSize:"contain"}},r.a.createElement(b.e,{color:"lightText"},"No Current Topics")):r.a.createElement(b.a,{bg:"eerieBlack",px:2,py:2,sx:{backgroundImage:"url(".concat(h.a,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center right",backgroundSize:"contain"}},r.a.createElement(b.e,{color:"lightText"},l,"s Remaining"))},z=function(){var e=U(),t=Object(o.useState)(T(e.get("topics")).filter((function(e){return e.amount>0&&""!==e.text})).map((function(e,t){return Object(R.a)(Object(R.a)({},e),{},{complete:!1,id:t})}))),a=Object(p.a)(t,2),n=a[0],c=a[1],i=Object(o.useMemo)((function(){return n.filter((function(e){return!e.complete}))}),[n]),l=Object(o.useMemo)((function(){return i.length>0?i[0]:null}),[i]),u=Object(o.useCallback)((function(){l&&c((function(e){return e.map((function(e){return e.id===l.id?Object(R.a)(Object(R.a)({},e),{},{complete:!0}):e}))}))}),[l]);return r.a.createElement(b.a,null,r.a.createElement(B,{currentTopic:l,markCurrentTopicAsCompleted:u}),i.map((function(e,t){return r.a.createElement(W,{key:"topic-".concat(t),first:0===t,sx:t!==i.length-1?{borderBottom:"1px solid black"}:{},topic:e})})))},A=function(){return r.a.createElement(m,null,r.a.createElement(l.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/awetosis-topic-widget"},r.a.createElement(N,null)),r.a.createElement(u.b,{path:"/awetosis-topic-widget/display"},r.a.createElement(z,null)),r.a.createElement(u.b,{path:"*"},r.a.createElement(u.a,{to:"/awetosis-topic-widget"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.c31c418c.chunk.js.map